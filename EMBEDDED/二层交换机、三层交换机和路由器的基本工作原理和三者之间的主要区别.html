<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>二层交换机、三层交换机和路由器的基本工作原理和三者之间的主要区别 | 芯机智</title>
  
  

  
  <link rel="alternate" href="/atom.xml" title="芯机智">
  

  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.10.1/css/all.min.css">
  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.8/css/style.css">
  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
  
  
  <div class="cover-wrapper">
    <cover class='cover post half'>
      
        
  <h1 class='title'>WitKit</h1>


  <div class="m_search">
    <form name="searchform" class="form u-search-form">
      <input type="text" class="input u-search-input" placeholder="" />
      <i class="icon fas fa-search fa-fw"></i>
    </form>
  </div>

<div class='menu navgation'>
  <ul class='h-list'>
    
      
        <li>
          <a class="nav home" href="/"
            
            
            id="home">
            <i class='fas fa-rss fa-fw'></i>&nbsp;博文
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/projects/"
            
            
            id="projects">
            <i class='fas fa-code-branch fa-fw'></i>&nbsp;项目
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/friends/"
            
              rel="nofollow"
            
            
            id="friends">
            <i class='fas fa-link fa-fw'></i>&nbsp;友链
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/about/"
            
              rel="nofollow"
            
            
            id="about">
            <i class='fas fa-info-circle fa-fw'></i>&nbsp;关于
          </a>
        </li>
      
    
  </ul>
</div>

      
    </cover>
    <header class="l_header pure">
  <div id="loading-bar-wrapper">
    <div id="loading-bar" class="pure"></div>
  </div>

	<div class='wrapper'>
		<div class="nav-main container container--flex">
      <a class="logo flat-box" href='/' >
        
          芯机智
        
      </a>
			<div class='menu navgation'>
				<ul class='h-list'>
          
  					
  						<li>
								<a class="nav flat-box" href="/categories/"
                  
                    rel="nofollow"
                  
                  
                  id="categories">
									<i class='fas fa-folder-open fa-fw'></i>&nbsp;分类
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/blog/tags/"
                  
                    rel="nofollow"
                  
                  
                  id="blogtags">
									<i class='fas fa-hashtag fa-fw'></i>&nbsp;标签
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/blog/archives/"
                  
                    rel="nofollow"
                  
                  
                  id="blogarchives">
									<i class='fas fa-archive fa-fw'></i>&nbsp;归档
								</a>
							</li>
      			
      		
				</ul>
			</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="搜索" />
						<i class="icon fas fa-search fa-fw"></i>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a class="fas fa-search fa-fw" href='javascript:void(0)'></a></li>
				
				<li class='s-menu'><a class="fas fa-bars fa-fw" href='javascript:void(0)'></a></li>
			</ul>
		</div>

		<div class='nav-sub container container--flex'>
			<a class="logo flat-box"></a>
			<ul class='switcher h-list'>
				<li class='s-comment'><a class="flat-btn fas fa-comments fa-fw" href='javascript:void(0)'></a></li>
        
          <li class='s-toc'><a class="flat-btn fas fa-list fa-fw" href='javascript:void(0)'></a></li>
        
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
    <header>
		<nav class="menu navgation">
      <ul>
        
          
            <li>
							<a class="nav flat-box" href="/"
                
                
                id="home">
								<i class='fas fa-clock fa-fw'></i>&nbsp;近期文章
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/blog/archives/"
                
                  rel="nofollow"
                
                
                id="blogarchives">
								<i class='fas fa-archive fa-fw'></i>&nbsp;文章归档
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/projects/"
                
                
                id="projects">
								<i class='fas fa-code-branch fa-fw'></i>&nbsp;开源项目
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/friends/"
                
                  rel="nofollow"
                
                
                id="friends">
								<i class='fas fa-link fa-fw'></i>&nbsp;我的友链
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="https://xaoxuu.com/wiki/material-x/"
                
                  rel="nofollow"
                
                
                id="https:xaoxuu.comwikimaterial-x">
								<i class='fas fa-book fa-fw'></i>&nbsp;主题文档
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/about/"
                
                  rel="nofollow"
                
                
                id="about">
								<i class='fas fa-info-circle fa-fw'></i>&nbsp;关于小站
							</a>
            </li>
          
       
      </ul>
		</nav>
    </header>
	</aside>
<script>setLoadingBarProgress(40);</script>

  </div>


  <div class="l_body">
    <div class='body-wrapper'>
      <div class='l_main'>
  

  
    <article id="post" class="post white-box article-type-post" itemscope itemprop="blogPost">
      


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  
    <h1 class="title">
      <a href="/EMBEDDED/二层交换机、三层交换机和路由器的基本工作原理和三者之间的主要区别.html">
        二层交换机、三层交换机和路由器的基本工作原理和三者之间的主要区别
      </a>
    </h1>
  


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    <a href="http://demonelf.github.io" rel="nofollow">
      
        <i class="fas fa-user" aria-hidden="true"></i>
      
      <p>madhex</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt" aria-hidden="true"></i>
    <p>2016-06-30</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/categories/EMBEDDED/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>EMBEDDED</p>
    </a>
  </div>


          
        
          
            
  
    <div class="new-meta-item browse busuanzi">
      <a class='notlink'>
        <i class="fas fa-eye" aria-hidden="true"></i>
        <p>
          <span id="busuanzi_value_page_pv">
            <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>
          </span>
        </p>
      </a>
    </div>
  


          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          <p><span style="font-family:幼圆; font-size:14pt; background-color:white">二层交换机：<br></span></p>
<a id="more"></a>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">1. <span style="color:#70ad47">CAM表</span>[端口&lt;-&gt;MAC]<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">2.<span style="color:red"><br>            </span>自身没MAC/IP<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">三层交换机：<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">1. <span style="color:#70ad47">CAM表</span>[MAC&lt;-&gt;VLAN]<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">2. <span style="color:red">路由表</span>[IP&lt;-&gt;MAC]<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">3. 自身有MAC/IP<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">4. 一个MAC/IP对应多个端口一个VLAN(多个端口通过桥接后就为VLAN三层口)<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">三层路由器：<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">1. <span style="color:red">路由表</span>[IP&lt;-&gt;MAC]<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">2. <span style="color:#70ad47">CAM表</span>[端口&lt;-&gt;MAC]<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">3.<span style="color:red"><br>            </span>自身有MAC/IP<br></span></p>
<p><span style="font-family:幼圆; font-size:14pt; background-color:white">4. 一个MAC对应一个端口<br></span></p>
<p><span style="font-family:等线 Light; font-size:16pt"><strong>二层交换机</strong></span><span style="color:black; font-family:幼圆; font-size:14pt"><span style="background-color:white">:    二层交换技术是发展比较成熟，<span style="color:#cc0000">二层交换机属数据链路层设备<span style="color:black">，可以识别数据包中的MAC地址信息，<span style="color:#cc0000">根据MAC地址进行转发<span style="color:black">，<span style="color:red">并将这些MAC地址与对应的端口记录在自己内部的一个地址表中<span style="color:black">。</span></span></span></span></span></span></span>具体如下：<span style="background-color:white"><br>            </span></span></p>
<p><span style="color:black; font-family:幼圆; font-size:14pt">（1）当交换机从某个端口收到一个数据包，它<span style="color:#cc0000">先读取包头中的源MAC地址<span style="color:black">，这样它就知道源MAC地址的机器是连在哪个端口上；<br></span></span></span></p>
<p><span style="color:black; font-family:幼圆; font-size:14pt">（2）再去<span style="color:#cc0000">读取包头中的目的MAC地址<span style="color:black">，<span style="color:#6600cc">并在地址表中查找相应的端口<span style="color:black">；<br></span></span></span></span></span></p>
<p><span style="color:black; font-family:幼圆; font-size:14pt">（3）如<span style="color:#990000">表中有与这目的MAC地址对应的端口，把数据包直接复制到这端口上<span style="color:black">。<br></span></span></span></p>
<p><span style="color:black; font-family:Arial; font-size:14pt">        </span><span style="font-family:等线 Light; font-size:16pt"><strong>三层交换机</strong></span><span style="color:black; font-size:14pt"><span style="font-family:幼圆">:</span><span style="font-family:Arial"> </span><span style="font-family:幼圆">    三层交换技术就是将路由技术与交换技术合二为一的技术。<span style="color:#6600cc">在对第一个数据流进行路由后，它将会产生一个MAC地址与IP地址的映射表<span style="color:black">，当同样的数据流再次通过时，将<span style="color:#cc0000">根据此表直接从二层通过而不是再次路由<span style="color:black">，从而消除了路由器进行路由选择而造成网络的延迟，提高了数据包转发的效率。<br></span></span></span></span></span></span></p>
<p><span style="color:black; font-family:Arial; font-size:14pt">         </span><span style="font-size:16pt"><strong><span style="font-family:等线 Light">路由器</span><span style="font-family:Calibri Light"><br>                </span></strong></span><span style="color:black; font-family:幼圆; font-size:14pt">：    传统地，<span style="color:#6600cc">路由器工作于OSI七层协议中的第三层<span style="color:black">，其<span style="color:#cc0000">主要任务是接收来自一个网络接口的数据包，根据其中所含的目的地址，决定转发到下一个目的地址<span style="color:black">。因此，路由器首先得在转发路由表中查找它的目的地址，若找到了目的地址，就在数据包的帧格前添加下一个MAC地址，同时IP数据包头的TTL（Time To Live）域也开始减数，并重新计算校验和。当数据包被送到输出端口时，它需要按顺序等待，以便被传送到输出链路上。路由器在<span style="color:#009900">工作时能够按照某种路由通信协议查找设备中的路由表。如果到某一特定节点有一条以上的路径，则基本预先确定的路由准则是选择最优（或最经济）的传输路径。由于各种网络段和其相互连接情况可能会因环境变化而变化，因此路由情况的信息一般也按所使用的路由信息协议的规定而定时更新<span style="color:black">。<br></span></span></span></span></span></span></span></p>
<p><span style="color:black; font-family:幼圆; font-size:14pt">主要区别：<span style="color:#cc0000">二层交换机工作在数据链路层，三层交换机工作在网络层，路由器工作在网络层<span style="color:black">。<br></span></span></span></p>
<p><span style="font-size:16pt"><strong>具体区别如下
</strong></span></p>
<p><span style="font-family:等线 Light; font-size:16pt"><strong>二层交换机和三层交换机的区别</strong></span><span style="color:black; font-family:幼圆; font-size:14pt">：<br></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial">        </span><span style="font-family:幼圆"><br></span></span></p>
<p><span style="color:black; font-family:幼圆; font-size:14pt">三层交换机使用了三层交换技术，简单地说，<span style="color:#006600">三层交换技术就是：二层交换技术＋三层转发技术<span style="color:black">。它解决了局域网中网段划分之后，网段中子网必须依赖路由器进行管理的局面，解决了传统路由器低速、复杂所造成的网络瓶颈问题。<br></span></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial">        </span><span style="font-family:幼圆">三层交换（也称多层交换技术，或IP交换技术）是相对于传统交换概念而提出的。众所周知，传统的交换技术是在OSI网络标准模型中的第二层——数据链路层进行*作的，而三层交换技术是在网络模型中的第三层实现了数据包的高速转发。简单地说，三层交换技术就是：<span style="color:#660000">二层交换技术＋三层转发技术<span style="color:black">。<br></span></span></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial">         </span><span style="font-family:幼圆">三层交换技术的出现，解决了局域网中网段划分之后，网段中子网必须依赖路由器进行管理的局面，解决了传统路由器低速、复杂所造成的网络瓶颈问题。<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial">         </span><span style="font-family:幼圆">其原理是：<br></span></span></p>
<p><span style="color:black; font-family:幼圆; font-size:14pt">假设两个使用IP协议的站点A、B通过第三层交换机进行通信，A把自己的IP 地址与B的IP 地址比较，采用其软件中配置的子网掩码提取出网络地址来确定B是否与自己在同一子网内。<br></span></p>
<p><span style="color:black; font-family:幼圆; font-size:14pt">若B 与A 在同一子网内，A 广播一个ARP 请求，B 返回其MAC 地址，A 得到B 的MAC 地址后将这一地址缓存起来，并用此MAC 地址封包转发数据，第二层交换模块查找MAC 地址表确定将数据包发向目的端口。<br></span></p>
<p><span style="color:black; font-family:幼圆; font-size:14pt">    (<span style="color:red">下面描述有问题-此次arp是要找到网关mac并非B的mac<span style="color:black">)<span style="color:red"><br>                    </span></span></span></span></p>
<p><span style="color:black; font-family:幼圆; font-size:14pt">    若B 与A不在同一子网内，如发送站A要与目的站B通信，发送站A要向”缺省网关”发出ARP(地址解析)封包，而”缺省网关”的IP地址其实是三层交换机的三层交换模块。当发送站A对”缺省网关”的IP地址广播出一个ARP请求时，<span style="color:#990000"><span style="background-color:aqua">如果三层交换模块在以前的通信过程中已经知道B站的MAC地址</span>，则向发送站A回复B的MAC地址。否则三层交换模块根据路由信息向B站广播一个ARP请求，B站得到此ARP请求后向三层交换模块回复其MAC地址，三层交换模块保存此地址并回复给发送站A,同时将<span style="background-color:aqua">B站的MAC地址发送到二层交换引擎的MAC地址表中</span><span style="color:black">。从这以后，<span style="color:#990000">当A向B发送的数据包便全部交给二层交换处理，信息得以高速交换。由于仅仅在路由过程中才需要三层处理，绝大部分数据都通过二层交换转发，因此三层交换机的速度很快，接近二层交换机的速度，同时比相同路由器的价格低很多<span style="color:black">。<br></span></span></span></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial"> </span><span style="color:red; font-family:幼圆">华为公司三层以太网交换机基本原理及转发流程：<a href="http://wenku.baidu.com/view/70f5b9360b4c2e3f572763ef.html" target="_blank" rel="external"><span style="background-color:yellow">http://wenku.baidu.com/view/70f5b9360b4c2e3f572763ef.html</span></a><br>            </span></span></p>
<p><span style="color:red; font-family:幼圆; font-size:14pt">三层交换机的工作原理<span style="color:black">：<a href="http://wenku.baidu.com/view/be70ca54f01dc281e53af0aa.html?from=search" target="_blank" rel="external">http://wenku.baidu.com/view/be70ca54f01dc281e53af0aa.html?from=search</a>)<span style="color:red"><br>                </span></span></span></p>
<p><span style="font-family:等线 Light; font-size:16pt"><strong>第二层交换机和路由器的区别</strong></span><span style="color:black; font-family:幼圆; font-size:14pt">：<br></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial">        </span><span style="font-family:幼圆">传统<span style="color:#cc0000">交换机从网桥发展而来，属于OSI第二层即数据链路层设备。它根据MAC地址寻址<span style="color:black">，通过站表选择路由，站表的建立和维护由交换机自动进行。<span style="color:#cc0000">路由器属于OSI第三层即网络层设备，它根据IP地址进行寻址，通过路由表路由协议产生<span style="color:black">。<span style="color:#006600">交换机最大的好处是快速，由于交换机只须识别帧中MAC地址，直接根据MAC地址产生选择转发端口<a href="http://lib.csdn.net/base/31" title="算法与数据结构知识库" target="_blank" rel="external"><span style="color:#df3434; text-decoration:underline"><strong>算法</strong></span></a>简单，便于ASIC实现，因此转发速度极高<span style="color:black">。但交换机的工作机制也带来一些问题。<br></span></span></span></span></span></span></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">1.回路：根据交换机地址学习和站表建立算法，交换机之间不允许存在回路。一旦存在回路，必须启动生成树算法，阻塞掉产生回路的端口。而路由器的路由协议没有这个问题，路由器之间可以有多条通路来平衡负载，提高可靠性。<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">2.负载集中：交换机之间只能有一条通路，使得信息集中在一条通信链路上，不能进行动态分配，以平衡负载。而路由器的路由协议算法可以避免这一点，OSPF路由协议算法不但能产生多条路由，而且能为不同的网络应用选择各自不同的最佳路由。<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">3.广播控制：交换机只能缩小冲突域，而不能缩小广播域。整个交换式网络就是一个大的广播域，广播报文散到整个交换式网络。而路由器可以隔离广播域，广播报文不能通过路由器继续进行广播。<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">4.子网划分：交换机只能识别MAC地址。MAC地址是物理地址，而且采用平坦的地址结构，因此不能根据MAC地址来划分子网。而路由器识别IP地址，IP地址由网络管理员分配，是逻辑地址且IP地址具有层次结构，被划分成网络号和主机号，可以非常方便地用于划分子网，<span style="color:#006600">路由器的主要功能就是用于连接不同的网络<span style="color:black">。<br></span></span></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">5.保密问题：虽说交换机也可以根据帧的源MAC地址、目的MAC地址和其他帧中内容对帧实施过滤，但路由器根据报文的源IP地址、目的IP地址、TCP端口地址等内容对报文实施过滤，更加直观方便。<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">6.介质相关：交换机作为桥接设备也能完成不同链路层和物理层之间的转换，但这种转换过程比较复杂，不适合ASIC实现，势必降低交换机的转发速度。因此目前交换机主要完成相同或相似物理介质和链路协议的网络互连，而不会用来在物理介质和链路层协议相差甚元的网络之间进行互连。而路由器则不同，它主要用于不同网络之间互连，因此能连接不同物理介质、链路层协议和网络层协议的网络。路由器在功能上虽然占据了优势，但价格昂贵，报文转发速度低。近几年，交换机为提高性能做了许多改进，其中最突出的改进是虚拟网络和三层交换。<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial">         </span><span style="font-family:幼圆">划分子网可以缩小广播域，减少广播风暴对网络的影响。路由器每一接口连接一个子网，广播报文不能经过路由器广播出去，连接在路由器不同接口的子网属于不同子网，子网范围由路由器物理划分。对交换机而言，每一个端口对应一个网段，由于子网由若干网段构成，通过对交换机端口的组合，可以逻辑划分子网。广播报文只能在子网内广播，不能扩散到别的子网内，通过合理划分逻辑子网，达到控制广播的目的。由于逻辑子网由交换机端口任意组合，没有物理上的相关性，因此称为虚拟子网，或叫虚拟网。虚拟网技术不用路由器就解决了广播报文的隔离问题，且虚拟网内网段与其物理位置无关，即相邻网段可以属于不同虚拟网，而相隔甚远的两个网段可能属于不同虚拟网，而相隔甚远的两个网段可能属于同一个虚拟网。不同虚拟网内的终端之间不能相互通信，增强了对网络内数据的访问控制。<br></span></span></p>
<p><span style="color:black; font-family:Arial; font-size:14pt">        </span><span style="font-size:16pt"><strong><span style="font-family:Calibri Light"> </span><span style="font-family:等线 Light">第三层交换机和路由器的区别</span></strong></span><span style="color:black; font-family:幼圆; font-size:14pt">：<br></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial">         </span><span style="font-family:幼圆">在第三层交换技术出现之前，几乎没有必要将路由功能器件和路由器区别开来，他们完全是相同的：提供路由功能正在路由器的工作，然而，现在第三层交换机完全能够执行传统路由器的大多数功能。作为网络互连的设备，第三层交换机具有以下特征：<br></span><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">1.转发基于第三层地址的业务流；<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">2.完全交换功能；<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">3.可以完成特殊服务，如报文过滤或认证；<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">4.执行或不执行路由处理。<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial">         </span><span style="font-family:幼圆">第三层交换机与传统路由器相比有如下优点：<br></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">1.<span style="color:#cc0000">子网间传输带宽可任意分配<span style="color:black">：传统路由器每个接口连接一个子网，子网通过路由器进行传输的速率被接口的带宽所限制。而三层交换机则不同，它可以把多个端口定义成一个虚拟网，把多个端口组成的虚拟网作为虚拟网接口，该虚拟网内信息可通过组成虚拟网的端口送给三层交换机，由于端口数可任意指定，子网间传输带宽没有限制。<br></span></span></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">2.<span style="color:#cc0000">合理配置信息资源<span style="color:black">：由于访问子网内资源速率和访问全局网中资源速率没有区别，子网设置单独服务器的意义不大，通过在全局网中设置服务器群不仅节省费用，更可以合理配置信息资源。<br></span></span></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">3.<span style="color:#cc0000">降低成本<span style="color:black">：通常的网络设计用交换机构成子网，用路由器进行子网间互连。目前采用三层交换机进行网络设计，既可以进行任意虚拟子网划分，又可以通过交换机三层路由功能完成子网间通信，为此节省了价格昂贵的路由器。<br></span></span></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Times New Roman">         </span><span style="font-family:幼圆">4.<span style="color:#cc0000">交换机之间连接灵活<span style="color:black">：作为交换机，它们之间不允许存在回路，作为路由器，又可有多条通路来提高可靠性、平衡负载。三层交换机用生成树算法阻塞造成回路的端口，但进行路由选择时，依然把阻塞掉的通路作为可选路径参与路由选择。<br></span></span></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial; background-color:white">         </span><span style="font-family:幼圆"><span style="background-color:white">交换机和路由器是性能和功能的矛盾体，<span style="color:#cc0000">交换机交换速度快，但控制功能弱<span style="color:black">，<span style="color:#6600cc">路由器控制性能强，但报文转发速度慢<span style="color:black">。解决这个矛盾的<span style="color:#009900">最新技术是三层交换，既有交换机线速转发报文能力，又有路由器良好的控制功能<span style="color:black">。</span></span></span></span></span></span></span><br>            </span></span></p>
<p><span style="color:black; font-family:幼圆; font-size:14pt">一、三层交换机与路由器的主要区别之所以有人搞不清三层交换机和路由器之间的区别，最根本就是三层交换机也具有”路由”功能，与传统路由器的路由功能总体上是一致的。虽然如此，<span style="color:#990000">三层交换机与路由器还是存在着相当大的本质区别的，下面分别予以介绍<span style="color:black">。<br></span></span></span></p>
<p><span style="color:#000099; font-size:14pt"><span style="font-family:幼圆">1. 主要功能不同</span><span style="color:black"><span style="font-family:Arial"> </span><span style="font-family:幼圆">虽然三层交换机与路由器都具有路由功能，但我们不能因此而把它们等同起来，正如现在许多网络设备同时具备多种传统网络设备功能一样，就如现在有许多宽带路由器不仅具有路由功能，还提供了交换机端口、硬件防火墙功能，但不能把它与交换机或者防火墙等同起来一样。因为这些路由器的主要功能还是路由功能，其它功能只不过是其附加功能，其目的是使设备适用面更广、使其更加实用。这里的<span style="color:#cc0000">三层交换机也一样，它仍是交换机产品，只不过它是具备了一些基本的路由功能的交换机，它的主要功能仍是数据交换<span style="color:black">。也就是说它<span style="color:#cc0000">同时具备了数据交换和路由由发两种功能，但其主要功能还是数据交换<span style="color:black">；而<span style="color:#cc0000">路由器仅具有路由转发这一种主要功能<span style="color:black">。<br></span></span></span></span></span></span></span></span></span></p>
<p><span style="color:#000099; font-family:幼圆; font-size:14pt">2. 主要适用的环境不一样<span style="color:#cc0000">三层交换机的路由功能通常比较简单，因为它所面对的主要是简单的局域网连接<span style="color:black">。正因如此，三<span style="color:#cc0000">层交换机的路由功能通常比较简单，路由路径远没有路由器那么复杂。它用在局域网中的主要用途还是提供快速数据交换功能，满足局域网数据交换频繁的应用特点<span style="color:black">。而路由器则不同，它的设<span style="color:#cc0000">计初哀就是为了满足不同类型的网络连接，虽然也适用于局域网之间的连接，但它的路由功能更多的体现在不同类型网络之间的互联上<span style="color:black">，如<span style="color:#cc0000">局域网与广域网之间的连接、不同协议的网络之间的连接等<span style="color:black">，所以路由器主要是用于不同类型的网络之间。<span style="color:#cc0000">它最主要的功能就是路由转发，解决好各种复杂路由路径网络的连接就是它的最终目的，所以路由器的路由功能通常非常强大，不仅适用于同种协议的局域网间，更适用于不同协议的局域网与广域网间。它的优势在于选择最佳路由、负荷分担、链路备份及和其他网络进行路由信息的交换等等路由器所具有功能<span style="color:black">。<br></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span style="color:#000099; font-size:14pt"><span style="font-family:幼圆">3. 性能体现不一样</span><span style="color:black"><span style="font-family:Arial"> </span><span style="font-family:幼圆">从技术上讲，<span style="color:#cc0000">路由器和三层交换机在数据包交换操作上存在着明显区别。路由器一般由基于微处理器的软件路由引擎执行数据包交换，而三层交换机通过硬件执行数据包交换<span style="color:black">。<span style="color:#009900">三层交换机在对第一个数据流进行路由后，它将会产生一个MAC地址与IP地址的映射表，当同样的数据流再次通过时，将根据此表直接从二层通过而不是再次路由，从而消除了路由器进行路由选择而造成网络的延迟，提高了数据包转发的效率<span style="color:black">。同时，三层交换机的路由查找是针对数据流的，它利用缓存技术，很容易利用ASIC技术来实现，因此，可以大大节约成本，并实现快速转发。而路由器的转发采用最长匹配的方式，实现复杂，通常使用软件来实现，转发效率较低。正因如此，从整体性能上比较的话，三层交换机的性能要远优于路由器，<span style="color:#006600">非常适用于数据交换频繁的局域网中<span style="color:black">；而路由器虽然路由功能非常强大，但它的数据包转发效率远低于三层交换机，更适合于数据交<span style="color:#006600">换不是很频繁的不同类型网络的互联，如局域网与互联网的互联<span style="color:black">。如果把路由器，特别是高档路由器用于局域网中，则在相当大程度上是一种浪费（就其强大的路由功能而言），而且还不能很好地满足局域网通信性能需求，影响子网间的正常通信。综上所述，三层交换机与路由器之间还是存在着非常大的本质区别的。无论从哪方面来说，在局<span style="color:#cc0000">域网中进行多子网连接，最好还选用三层交换机，特别是在不同子网数据交换频繁的环境中<span style="color:black">。一方面可以确保子网间的通信性能需求，另一方面省去了另外购买交换机的投资。当然，如果子网间的通信不是很频繁，采用路由器也无可厚非，也可达到子网安全隔离相互通信的目的。具体要根据实际需求来定<br></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span style="color:black; font-size:14pt"><span style="font-family:Arial">     </span><span style="font-family:幼圆">三层交换机的最重要的<span style="color:#cc0000">目的是加快大型局域网内部的数据交换，所具有的路由功能也是为这目的服务的，能够做到一次路由<br>，多次转发<span style="color:black">。对于数据包转发等规律性的过程由硬件高速实现，而像路由信息更新、路由表维护、路由计算、路由<br>确定等功能，由软件实现。<br></span></span></span><span style="font-family:Arial">      </span><span style="font-family:幼圆">出于安全和管理方便的考虑，主要是为了减小广播风暴的危害，必须把大型局域网按功能或地域等因素化成一个个小的<br>局域网，这就使得VLAN技术在网络中得到大量应用，而不同VLAN之间的通信都要经过路由器来完成转发，<br>随着网间互访的不断增加。单纯使用路由器来实现网间访问，不但由于端口数量有限，而且路由速度较慢。从而<br>限制了网络的规模和访问速度。<span style="color:#6600cc">基于这种情况三层交换机便应用而生。三层交换机是为IP设计的，接口类型简单<span style="color:black">；<br>拥有很强二层包处理能力，非常适合用于大型局域网内的数据路由与交换，它既可以工作在协议第三层替代或是部分完成<br>传统路由器的功能，同时又具有几乎第二层交换的速度，且价格相对便宜。<br></span></span></span><span style="font-family:Arial">       </span><span style="color:#990000"><span style="font-family:幼圆">三层交换机出现最重要的目的是加快大型局域网内部的数据交换，所具有的路由功能也多是围绕这个目的而展开的，所以它的<br>路由功能没有同一档次的专业路由器强<span style="color:black">。毕竟在安全、协议支持等方面还有许多欠缺，并不能完全取代路由器的工作。<br></span></span><span style="font-family:Arial">       </span><span style="color:black"><span style="font-family:幼圆">在实际中的<span style="color:#6600cc">典型用法是<span style="color:black">：<span style="color:#009900">处于同一个局域网中的各个子网的互联以及局域网中VLAN间的路由，用三层交换机来代替路由。<br>而只有局域网与公网互联之间要实现跨地域的网络访问，才通过专业路由器<span style="color:black">。<br></span></span></span></span></span><span style="font-family:Arial">     </span><span style="font-family:幼圆">从表面上看，第三层交换机是第二层交换器与路由器的合二为一，然而这种结合并非简单的物理结合，而是各取所长的逻辑<br>结合。其重要表现是，当某一信息源的第一个数据流进行第三层交换后，其中的路由系统会<span style="color:#000099">产生一个MAC地址与IP地址的映射表<span style="color:black">，<br><span style="color:#009900">并将该表存储起来，当同一信息源的后续数据流再次进入交换环境时，交换机将根据第一次产生并保存的地址映射表，直接从第二层<br>由源地址传输到目的地址，不再经过第三路由系统处理，从而消除路由选择的网络延迟<span style="color:black">。<br></span></span></span></span></span></span></span></span></p>

        </div>
        
          


  <section class='meta' id="footer-meta">
    <hr>
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2017-07-10T16:46:07+08:00">
  <a class='notlink'>
    <i class="fas fa-clock" aria-hidden="true"></i>
    <p>最后更新于 2017年7月10日</p>
  </a>
</div>

        
      
        
          

        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="QQ好友" rel="external nofollow noopener noreferrer"
          
          href="http://connect.qq.com/widget/shareqq/index.html?url=http://demonelf.github.io/EMBEDDED/二层交换机、三层交换机和路由器的基本工作原理和三者之间的主要区别.html&title=二层交换机、三层交换机和路由器的基本工作原理和三者之间的主要区别 | 芯机智&summary=二层交换机："
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@19.1.9/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="QQ空间" rel="external nofollow noopener noreferrer"
          
          href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://demonelf.github.io/EMBEDDED/二层交换机、三层交换机和路由器的基本工作原理和三者之间的主要区别.html&title=二层交换机、三层交换机和路由器的基本工作原理和三者之间的主要区别 | 芯机智&summary=二层交换机："
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@19.1.9/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="微博" rel="external nofollow noopener noreferrer"
          
          href="http://service.weibo.com/share/share.php?url=http://demonelf.github.io/EMBEDDED/二层交换机、三层交换机和路由器的基本工作原理和三者之间的主要区别.html&title=二层交换机、三层交换机和路由器的基本工作原理和三者之间的主要区别 | 芯机智&summary=二层交换机："
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@19.1.9/logo/128/weibo.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
            <div class="prev-next">
                
                    <section class="prev">
                        <span class="art-item-left">
                            <h6><i class="fas fa-chevron-left" aria-hidden="true"></i>&nbsp;上一页</h6>
                            <h4>
                                <a href="/EMBEDDED/这小玩意儿太有用了 无线HDMI告别繁琐数据线.html" rel="prev" title="这小玩意儿太有用了 无线HDMI告别繁琐数据线">
                                  
                                      这小玩意儿太有用了 无线HDMI告别繁琐数据线
                                  
                                </a>
                            </h4>
                            
                        </span>
                    </section>
                
                
                    <section class="next">
                        <span class="art-item-right" aria-hidden="true">
                            <h6>下一页&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i></h6>
                            <h4>
                                <a href="/EMBEDDED/以太网PHY和MAC.html" rel="prev" title="以太网PHY和MAC">
                                    
                                        以太网PHY和MAC
                                    
                                </a>
                            </h4>
                            
                        </span>
                    </section>
                
            </div>
        
      </section>
    </article>
  

  
    <!-- 显示推荐文章和评论 -->



  


  




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->



  <script>
    window.subData = {
      title: '二层交换机、三层交换机和路由器的基本工作原理和三者之间的主要区别',
      tools: true
    }
  </script>


</div>
<aside class='l_side'>
  
    
    
      
        
          
          
            <section class='widget author'>
  <div class='content pure'>
    
      <div class='avatar'>
        <img class='avatar' src='http://bbs.dnsnat.com/discuz/uc_server/data/avatar/000/00/00/01_avatar_big.jpg'/>
      </div>
    
    
    
      <div class="social-wrapper">
        
          
            <a href="/atom.xml"
              class="social fas fa-rss flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="mailto:me@xaoxuu.com"
              class="social fas fa-envelope flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://github.com/xaoxuu"
              class="social fab fa-github flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://music.163.com/#/user/home?id=63035382"
              class="social fas fa-headphones-alt flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
      </div>
    
  </div>
</section>

          
        
      
        
          
          
            

          
        
      
        
          
          
            <section class='widget grid'>
  
<header class='pure'>
  <div><i class="fas fa-map-signs fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;站内导航</div>
  
</header>

  <div class='content pure'>
    <ul class="grid navgation">
      
        <li><a class="flat-box" title="/" href="/"
          
          
          id="home">
          
            <i class="fas fa-clock fa-fw" aria-hidden="true"></i>
          
          近期文章
        </a></li>
      
        <li><a class="flat-box" title="/blog/archives/" href="/blog/archives/"
          
            rel="nofollow"
          
          
          id="blogarchives">
          
            <i class="fas fa-archive fa-fw" aria-hidden="true"></i>
          
          文章归档
        </a></li>
      
        <li><a class="flat-box" title="/projects/" href="/projects/"
          
          
          id="projects">
          
            <i class="fas fa-code-branch fa-fw" aria-hidden="true"></i>
          
          开源项目
        </a></li>
      
        <li><a class="flat-box" title="/friends/" href="/friends/"
          
            rel="nofollow"
          
          
          id="friends">
          
            <i class="fas fa-link fa-fw" aria-hidden="true"></i>
          
          我的友链
        </a></li>
      
        <li><a class="flat-box" title="https://xaoxuu.com/wiki/material-x/" href="https://xaoxuu.com/wiki/material-x/"
          
            rel="nofollow"
          
          
          id="https:xaoxuu.comwikimaterial-x">
          
            <i class="fas fa-book fa-fw" aria-hidden="true"></i>
          
          主题文档
        </a></li>
      
        <li><a class="flat-box" title="/about/" href="/about/"
          
            rel="nofollow"
          
          
          id="about">
          
            <i class="fas fa-info-circle fa-fw" aria-hidden="true"></i>
          
          关于小站
        </a></li>
      
    </ul>
  </div>
</section>

          
        
      
        
          
          
            
  <section class='widget category'>
    
<header class='pure'>
  <div><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;文章分类</div>
  
    <a class="rightBtn"
    
      rel="nofollow"
    
    
    href="/categories/"
    title="categories/">
    <i class="fas fa-expand-arrows-alt fa-fw"></i></a>
  
</header>

    <div class='content pure'>
      <ul class="entry">
        
          <li><a class="flat-box" title="/categories/DEVELOP/" href="/categories/DEVELOP/"><div class='name'>DEVELOP</div><div class='badge'>(4)</div></a></li>
        
          <li><a class="flat-box" title="/categories/EMBEDDED/" href="/categories/EMBEDDED/"><div class='name'>EMBEDDED</div><div class='badge'>(95)</div></a></li>
        
          <li><a class="flat-box child" title="/categories/EMBEDDED/mini2440/" href="/categories/EMBEDDED/mini2440/"><div class='name'>mini2440</div><div class='badge'>(3)</div></a></li>
        
          <li><a class="flat-box" title="/categories/LIVE/" href="/categories/LIVE/"><div class='name'>LIVE</div><div class='badge'>(3)</div></a></li>
        
          <li><a class="flat-box" title="/categories/NETWORK/" href="/categories/NETWORK/"><div class='name'>NETWORK</div><div class='badge'>(12)</div></a></li>
        
          <li><a class="flat-box" title="/categories/SYSTEM/" href="/categories/SYSTEM/"><div class='name'>SYSTEM</div><div class='badge'>(12)</div></a></li>
        
          <li><a class="flat-box" title="/categories/VPN系列之五花八门/" href="/categories/VPN系列之五花八门/"><div class='name'>VPN系列之五花八门</div><div class='badge'>(2)</div></a></li>
        
          <li><a class="flat-box" title="/categories/arm/" href="/categories/arm/"><div class='name'>arm</div><div class='badge'>(0)</div></a></li>
        
          <li><a class="flat-box" title="/categories/embedded/" href="/categories/embedded/"><div class='name'>embedded</div><div class='badge'>(0)</div></a></li>
        
          <li><a class="flat-box" title="/categories/linux/" href="/categories/linux/"><div class='name'>linux</div><div class='badge'>(0)</div></a></li>
        
          <li><a class="flat-box" title="/categories/笑看人生/" href="/categories/笑看人生/"><div class='name'>笑看人生</div><div class='badge'>(0)</div></a></li>
        
      </ul>
    </div>
  </section>


          
        
      
        
          
          
            

          
        
      
        
          
          
            


  <section class='widget music'>
    
<header class='pure'>
  <div><i class="fas fa-compact-disc fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;最近在听</div>
  
    <a class="rightBtn"
    
      rel="external nofollow noopener noreferrer"
    
    
      target="_blank"
    
    href="https://music.163.com/#/user/home?id=63035382"
    title="https://music.163.com/#/user/home?id=63035382">
    <i class="far fa-heart fa-fw"></i></a>
  
</header>

    <div class='content pure'>
      
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.css">
  <div class="aplayer"
    data-theme="#1BCDFC"
    
    
    data-mode="circulation"
    data-server="netease"
    data-type="playlist"
    data-id="2615636388"
    data-volume="0.7">
  </div>
  <script src="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/meting@1.1.0/dist/Meting.min.js"></script>


    </div>
  </section>


          
        
      
    

  
</aside>

<footer id="footer" class="clearfix">
  
  
    <div class="social-wrapper">
      
        
          <a href="/atom.xml"
            class="social fas fa-rss flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="mailto:me@xaoxuu.com"
            class="social fas fa-envelope flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="https://github.com/xaoxuu"
            class="social fab fa-github flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="https://music.163.com/#/user/home?id=63035382"
            class="social fas fa-headphones-alt flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
    </div>
  
  <br>
  <div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
  <div>
    本站使用
    <a href="https://xaoxuu.com/wiki/material-x/" target="_blank" class="codename">Material X</a>
    作为主题
    
      ，
      总访问量为
      <span id="busuanzi_value_site_pv"><i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span>
      次
    
    。
  </div>
</footer>
<script>setLoadingBarProgress(80);</script>


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>

  <script>
    var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
    var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
    var ALGOLIA_API_KEY = "";
    var ALGOLIA_APP_ID = "";
    var ALGOLIA_INDEX_NAME = "";
    var AZURE_SERVICE_NAME = "";
    var AZURE_INDEX_NAME = "";
    var AZURE_QUERY_KEY = "";
    var BAIDU_API_ID = "";
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/"||"/";
    if(!ROOT.endsWith('/'))ROOT += '/';
  </script>

<script src="//instant.page/1.2.2" type="module" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU"></script>


  <script async src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      const $reveal = $('.reveal');
      if ($reveal.length === 0) return;
      const sr = ScrollReveal({ distance: 0 });
      sr.reveal('.reveal');
    });
  </script>


  <script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>
  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>




  
  
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script>
    <script type="text/javascript">
      $(function(){
        if ('.cover') {
          $('.cover').backstretch(
          ["https://img.vim-cn.com/6d/a0c9e6f9efad8b731cb7376504bd10d79d2053.jpg"],
          {
            duration: "6000",
            fade: "2500"
          });
        } else {
          $.backstretch(
          ["https://img.vim-cn.com/6d/a0c9e6f9efad8b731cb7376504bd10d79d2053.jpg"],
          {
            duration: "6000",
            fade: "2500"
          });
        }
      });
    </script>
  











  <script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.8/js/app.js"></script>


  <script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.8/js/search.js"></script>




<!-- 复制 -->
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  let COPY_SUCCESS = "复制成功";
  let COPY_FAILURE = "复制失败";
  /*页面载入完成后，创建复制按钮*/
  !function (e, t, a) {
    /* code */
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '  <i class="fa fa-copy"></i><span>复制</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });

      clipboard.on('success', function(e) {
        //您可以加入成功提示
        console.info('Action:', e.action);
        console.info('Text:', e.text);
        console.info('Trigger:', e.trigger);
        success_prompt(COPY_SUCCESS);
        e.clearSelection();
      });
      clipboard.on('error', function(e) {
        //您可以加入失败提示
        console.error('Action:', e.action);
        console.error('Trigger:', e.trigger);
        fail_prompt(COPY_FAILURE);
      });
    }
    initCopyCode();

  }(window, document);

  /**
   * 弹出式提示框，默认1.5秒自动消失
   * @param message 提示信息
   * @param style 提示样式，有alert-success、alert-danger、alert-warning、alert-info
   * @param time 消失时间
   */
  var prompt = function (message, style, time)
  {
      style = (style === undefined) ? 'alert-success' : style;
      time = (time === undefined) ? 1500 : time*1000;
      $('<div>')
          .appendTo('body')
          .addClass('alert ' + style)
          .html(message)
          .show()
          .delay(time)
          .fadeOut();
  };

  // 成功提示
  var success_prompt = function(message, time)
  {
      prompt(message, 'alert-success', time);
  };

  // 失败提示
  var fail_prompt = function(message, time)
  {
      prompt(message, 'alert-danger', time);
  };

  // 提醒
  var warning_prompt = function(message, time)
  {
      prompt(message, 'alert-warning', time);
  };

  // 信息提示
  var info_prompt = function(message, time)
  {
      prompt(message, 'alert-info', time);
  };

</script>


<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* 图片采用懒加载处理时,
       * 一般图片标签内会有个属性名来存放图片的真实地址，比如 data-original,
       * 那么此处将原本的属性名src替换为对应属性名data-original,
       * 修改如下
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });
</script>





  <script>setLoadingBarProgress(100);</script>
</body>
</html>
